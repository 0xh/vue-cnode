webpackJsonp([2],{27:function(t,e,a){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var o=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var a=arguments[e];for(var i in a)Object.prototype.hasOwnProperty.call(a,i)&&(t[i]=a[i])}return t},s=a(9),n=(i(s),a(4)),r=i(n),c=a(5),d=a(6),l=i(d),u=a(90),p=i(u);e.default={mixins:[l.default],components:{replyBox:p.default},computed:(0,c.mapState)({user:function(t){return t.user}}),routeData:function(){return{existence:!0,id:"",author_id:"",tab:"share",content:"",title:"",last_reply_at:"",good:!1,top:!1,reply_count:0,visit_count:0,create_at:"",author:{},replies:[],is_collect:!1}},mounted:function(){this.getData()},methods:{getData:function(){var t=this,e=this.$route.params.vid;r.default.get("/api/v1/topic/"+e,{},function(e){var a=e.data,i=e.success;i?(a.replies.forEach(function(t){return t.comment=!1}),o(t.$data,a)):t.existence=!1})},testThing:function(t){return t.indexOf(this.user.id||"")>-1},fabulousItem:function(t){var e=t.ups,a=t.id;if(!this.user.accesstoken)return this.$router.push("/login");var i=e.indexOf(this.user.id);i>-1?e.splice(i,1):e.push(this.user.id),r.default.post("/api/v1/reply/"+a+"/ups")},commentShow:function(t){if(!this.user.accesstoken)return this.$router.push("/login");var e=t.comment;this.replies.forEach(function(t){return t.comment=!1}),t.comment=!e}}}},28:function(t,e,a){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var o=a(4),s=i(o);e.default={props:{reply_id:{type:String,default:""},loginname:{type:String,default:""}},data:function(){return{btnname:"回复",content:""}},methods:{submit:function(){var t=this;if(!this.content)return s.default.toast("请输入回复内容");this.btnname="回复中...";var e=this.reply_id,a=this.content,i=this.loginname,o=this.$route.params.vid;e&&(a="[@"+i+"](/user/"+i+") "+a),a+="\n\n\nsource [vue-cnode mobile 2.0](http://lzxb.name/vue-cnode/)",s.default.post("/api/v1/topic/"+o+"/replies",{reply_id:e,content:a},function(e){var a=e.success,i=e.error_msg;t.btnname="回复",a?(t.content="",t.$emit("success")):s.default.toast(i)},function(){t.btnname="回复失败"})}}}},48:function(t,e,a){e=t.exports=a(1)(),e.push([t.id,".reply-box .text[data-v-006e652d]{padding:5px 10px;margin-bottom:10px;border-radius:5px;border:1px solid #eee}.reply-box .text textarea[data-v-006e652d]{box-sizing:border-box;width:100%;line-height:24px;border:none;font-size:13px;resize:none}.reply-box .text textarea[data-v-006e652d]:focus{outline:none}.reply-box .btn[data-v-006e652d]{padding:5px 30px;line-height:24px;border-radius:5px;border:1px solid #76ae01;font-size:14px;color:#fff;background:#80bd01}.reply-box .btn[data-v-006e652d]:focus{outline:none}.reply-box .msg[data-v-006e652d]{padding:5px 10px;line-height:26px;color:red}",""])},64:function(t,e,a){e=t.exports=a(1)(),e.push([t.id,".datas[data-v-ccda31d2]{padding:10px;border-bottom:1px solid #eee}.datas .tit[data-v-ccda31d2]{position:relative;padding:10px 0;margin:0;line-height:24px;font-weight:700;font-size:22px;text-align:center;color:#222}.datas .bottom .item[data-v-ccda31d2]{padding:0 5px;color:#666}.datas .bottom .item .iconfont[data-v-ccda31d2]{padding-right:3px}.re-list li[data-v-ccda31d2]{padding:10px;border-bottom:1px solid #eee}.re-list .headimg[data-v-ccda31d2]{padding-right:10px}.re-list .headimg .pic[data-v-ccda31d2]{overflow:hidden;display:block;width:28px;height:28px;border-radius:50%;border:1px solid #ddd;background-color:#eee;background-position:50%;background-size:cover}.re-list time[data-v-ccda31d2]{padding-left:10px;font-size:12px}.re-list .num[data-v-ccda31d2]{font-size:13px}.re-list .bottom .icon[data-v-ccda31d2]{position:relative;padding:5px 10px}.re-list .bottom .icon.fabulous[data-v-ccda31d2]{color:#80bd01}.re-list .bottom .icon em[data-v-ccda31d2]{font-size:13px;font-style:normal}.re-list .markdown-body[data-v-ccda31d2]{padding:10px 0}.re-list .replies-count[data-v-ccda31d2]{border-left:5px solid #80bd01}.re-list .replies-count em[data-v-ccda31d2]{font-style:normal;color:#80bd01}.reply[data-v-ccda31d2]{padding:50px 10px}.tip-login[data-v-ccda31d2]{padding:100px;text-align:center}",""])},89:function(t,e,a){var i,o;a(126),i=a(27);var s=a(109);o=i=i||{},"object"!=typeof i.default&&"function"!=typeof i.default||(o=i=i.default),"function"==typeof o&&(o=o.options),o.render=s.render,o.staticRenderFns=s.staticRenderFns,o._scopeId="data-v-ccda31d2",t.exports=i},90:function(t,e,a){var i,o;a(110),i=a(28);var s=a(93);o=i=i||{},"object"!=typeof i.default&&"function"!=typeof i.default||(o=i=i.default),"function"==typeof o&&(o=o.options),o.render=s.render,o.staticRenderFns=s.staticRenderFns,o._scopeId="data-v-006e652d",t.exports=i},93:function(t,e){t.exports={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"reply-box"},[a("form",{on:{submit:function(e){e.preventDefault(),t.submit(e)}}},[a("div",{staticClass:"text"},[a("textarea",{directives:[{name:"model",rawName:"v-model",value:t.content,expression:"content"}],attrs:{placeholder:t.loginname?"@"+t.loginname:"发表你的看法..."},domProps:{value:t._s(t.content)},on:{input:function(e){e.target.composing||(t.content=e.target.value)}}})]),t._v(" "),a("div",{attrs:{flex:"main:right"}},[a("div",{staticClass:"msg"}),t._v(" "),a("div",{attrs:{"flex-box":"0"}},[a("button",{staticClass:"btn"},[t._v(t._s(t.btnname))])])])])])},staticRenderFns:[]}},109:function(t,e){t.exports={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("v-header",{attrs:{title:"主题"}},[a("div",{staticClass:"item",attrs:{flex:"main:center cross:center"},on:{click:function(e){t.$router.go(-1)}},slot:"left"},[a("i",{staticClass:"iconfont icon-back"})])]),t._v(" "),a("v-content",{directives:[{name:"scroll-record",rawName:"v-scroll-record"}],staticStyle:{bottom:"0"}},[!t.id&&t.existence?a("v-loading"):t._e(),t._v(" "),t.existence?t._e():a("v-data-null",{attrs:{msg:"话题不存在"}}),t._v(" "),t.id?[t.top||t.good?a("div",{staticClass:"common-typeicon",attrs:{flex:""}},[t.good?a("div",{staticClass:"icon"},[a("i",{staticClass:"iconfont icon-topic-good"})]):t._e(),t._v(" "),t.top?a("div",{staticClass:"icon"},[a("i",{staticClass:"iconfont icon-topic-top"})]):t._e()]):t._e(),t._v(" "),a("ul",{staticClass:"re-list"},[a("li",{attrs:{flex:"box:first"}},[a("div",{staticClass:"headimg"},[a("router-link",{staticClass:"pic",style:{backgroundImage:"url("+t.author.avatar_url+")"},attrs:{to:"/user/"+t.author.loginname}})],1),t._v(" "),a("div",{staticClass:"bd"},[a("div",{attrs:{flex:""}},[a("router-link",{attrs:{"flex-box":"0",to:"/user/"+t.author.loginname}},[t._v(t._s(t.author.loginname))]),t._v(" "),a("time",{attrs:{"flex-box":"1"}},[t._v(t._s(t._f("formatDate")(t.create_at)))]),t._v(" "),a("div",{staticClass:"num",attrs:{"flex-box":"0"}},[t._v("#楼主")])],1)])]),t._v(" "),a("li",[a("div",{staticClass:"datas"},[a("div",{staticClass:"tit"},[t._v(t._s(t.title))]),t._v(" "),a("div",{staticClass:"bottom",attrs:{flex:"main:center"}},[a("div",{staticClass:"item click",attrs:{flex:"main:center cross:center"}},[a("i",{staticClass:"iconfont icon-click"}),t._v(" "),a("div",{staticClass:"num"},[t._v(t._s(t.visit_count))])]),t._v(" "),a("div",{staticClass:"item reply",attrs:{flex:"main:center cross:center"}},[a("i",{staticClass:"iconfont icon-comment"}),t._v(" "),a("div",{staticClass:"num"},[t._v(t._s(t.reply_count))])])])]),t._v(" "),a("div",{staticClass:"markdown-body",domProps:{innerHTML:t._s(t.content)}})]),t._v(" "),t.replies.length?a("li",{staticClass:"replies-count"},[t._v("\n                    共("),a("em",[t._v(t._s(t.replies.length))]),t._v(")条回复\n                ")]):t._e(),t._v(" "),t._l(t.replies,function(e,i){return a("li",[a("div",{attrs:{flex:"box:first"}},[a("div",{staticClass:"headimg"},[a("router-link",{staticClass:"pic",style:{backgroundImage:"url("+e.author.avatar_url+")"},attrs:{to:"/user/"+e.author.loginname}})],1),t._v(" "),a("div",{staticClass:"bd"},[a("div",{attrs:{flex:""}},[a("router-link",{attrs:{"flex-box":"0",to:"/user/"+e.author.loginname}},[t._v(t._s(e.author.loginname))]),t._v(" "),a("time",{attrs:{"flex-box":"1"}},[t._v(t._s(t._f("formatDate")(e.create_at)))]),t._v(" "),a("div",{staticClass:"num",attrs:{"flex-box":"0"}},[t._v("#"+t._s(i+1))])],1),t._v(" "),a("div",{staticClass:"markdown-body",domProps:{innerHTML:t._s(e.content)}}),t._v(" "),a("div",{staticClass:"bottom",attrs:{flex:"dir:right cross:center"}},[a("div",{staticClass:"icon",on:{click:function(a){t.commentShow(e,i)}}},[a("i",{staticClass:"iconfont icon-comment-topic"})]),t._v(" "),e.author.loginname!==t.user.loginname?a("div",{staticClass:"icon",class:{fabulous:t.testThing(e.ups)},on:{click:function(a){t.fabulousItem(e)}}},[a("i",{staticClass:"iconfont icon-comment-fabulous"}),t._v(" "),e.ups.length?a("em",[t._v(t._s(e.ups.length))]):t._e()]):t._e()])])]),t._v(" "),e.comment?a("reply-box",{attrs:{loginname:e.author.loginname,reply_id:e.id},on:{success:t.getData}}):t._e()],1)})],2),t._v(" "),t.user.id?a("div",{staticClass:"reply"},[a("reply-box",{on:{success:t.getData}})],1):t._e(),t._v(" "),t.user.id?t._e():a("div",{staticClass:"tip-login"},[t._v("\n                你还未登录，请先"),a("router-link",{attrs:{to:"/login"}},[t._v("登录")])],1)]:t._e()],2)],1)},staticRenderFns:[]}},110:function(t,e,a){var i=a(48);"string"==typeof i&&(i=[[t.id,i,""]]),a(2)(i,{}),i.locals&&(t.exports=i.locals)},126:function(t,e,a){var i=a(64);"string"==typeof i&&(i=[[t.id,i,""]]),a(2)(i,{}),i.locals&&(t.exports=i.locals)}});