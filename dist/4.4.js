webpackJsonp([4],{7:function(e,t,i){"use strict";function o(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(t,"__esModule",{value:!0});var r=i(18),s=o(r),n=i(19),a=o(n),c=i(20),d=o(c);t["default"]={load:s["default"],topicReply:a["default"],vHeader:d["default"]}},8:function(e,t,i){"use strict";function o(e){return e&&e.__esModule?e:{"default":e}}function r(){var e=arguments.length<=0||void 0===arguments[0]?"":arguments[0];return{components:l["default"],store:n["default"],vuex:{getters:{user:function(e){return e.user},state:function(t){return t[e]}},actions:(0,c["default"])(e)},props:{title:{type:String,"default":"全部"}},created:function(){this.state.path!=this.$route.path&&this.RESET(this.$route.path)},data:function(){return this.state},ready:function(){window.scrollTo(this.scrollX,this.scrollY)},beforeDestroy:function(){this.LEAVE()}}}Object.defineProperty(t,"__esModule",{value:!0}),t["default"]=void 0;var s=i(5),n=o(s),a=i(6),c=o(a),d=i(7),l=o(d);t["default"]=r},9:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t["default"]={props:{state:{type:Number,"default":0,validator:function(e){return[-1,0,1].indexOf(e)>-1}},tip:{type:String,"default":"正在加载中"}}}},10:function(e,t,i){"use strict";function o(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(t,"__esModule",{value:!0});var r=i(4),s=o(r);t["default"]={props:{placeholder:{type:String,"default":""},reply_id:{type:String,"default":""},topic_id:{type:String,required:!0},accesstoken:{type:String,required:!0}},data:function(){return{content:"",btnname:"回复",error_msg:""}},methods:{submit:function(){var e=this;this.btnname="回复中...",this.error_msg="";var t=this.reply_id,i=this.topic_id,o=this.accesstoken,r=this.content,n=r+='\n\r<br><br>来自<a href="https://lzxb.github.io/vue-cnode/" target="_blank">vue-cnode手机版</a>';s["default"].post("/api/v1//topic/"+i+"/replies",{reply_id:t,accesstoken:o,content:n},function(t){var i=t.success,o=t.error_msg;e.content="",e.btnname="回复",i||(e.error_msg=o)},function(){e.btnname="回复失败"})}}}},11:function(e,t,i){"use strict";function o(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(t,"__esModule",{value:!0});var r=i(4),s=(o(r),i(5)),n=o(s),a=i(6),c=o(a);t["default"]={store:n["default"],vuex:{getters:{user:function(e){return e.user},state:function(e){return e[name]}},actions:(0,c["default"])()},props:{title:{type:String,"default":"全部"},user:{type:Object,"default":function(){return{}}}}}},12:function(e,t,i){t=e.exports=i(1)(),t.push([e.id,".data-load .msg[_v-3a59f034]{line-height:70px;text-align:center;font-size:14px}.data-load-true[_v-3a59f034]{margin:20px auto;position:relative;-webkit-animation:rotate-forever 1s infinite linear;animation:rotate-forever 1s infinite linear;height:30px;width:30px;border:4px solid #2962ff;border-right-color:transparent;border-radius:50%}.data-load-true .msg[_v-3a59f034]{display:none}@-webkit-keyframes rotate-forever{0%{-webkit-transform:rotate(0deg);transform:rotate(0deg)}to{-webkit-transform:rotate(1turn);transform:rotate(1turn)}}@keyframes rotate-forever{0%{-webkit-transform:rotate(0deg);transform:rotate(0deg)}to{-webkit-transform:rotate(1turn);transform:rotate(1turn)}}",""])},13:function(e,t,i){t=e.exports=i(1)(),t.push([e.id,".reply-box .text[_v-9369850a]{padding:5px 10px;margin-bottom:10px;border-radius:5px;border:1px solid #eee}.reply-box .text textarea[_v-9369850a]{box-sizing:border-box;width:100%;line-height:24px;border:none;font-size:13px;resize:none}.reply-box .text textarea[_v-9369850a]:focus{outline:none}.reply-box .btn[_v-9369850a]{padding:5px 30px;line-height:24px;border-radius:5px;border:1px solid #0041f5;font-size:14px;color:#fff;background:#2962ff}.reply-box .btn[_v-9369850a]:focus{outline:none}.reply-box .msg[_v-9369850a]{padding:5px 10px;line-height:26px;color:red}",""])},14:function(e,t,i){t=e.exports=i(1)(),t.push([e.id,"",""])},15:function(e,t){e.exports=' <div class=data-load :class="{\'data-load-true\' : state == 0}" _v-3a59f034=""> <div class=msg _v-3a59f034="">{{tip}}</div> </div> '},16:function(e,t){e.exports=' <div class=reply-box _v-9369850a=""> <div class=text _v-9369850a=""><textarea :placeholder=placeholder v-model=content _v-9369850a=""></textarea></div> <div flex=main:right _v-9369850a=""> <div class=msg _v-9369850a="">{{error_msg}}</div> <div flex-box=0 _v-9369850a=""> <button class=btn v-on:click=submit(item) _v-9369850a="">{{btnname}}</button> </div> </div> </div> '},17:function(e,t){e.exports=' <header class=header flex=box:justify _v-eb44895a=""> <div class=icon flex="main:center cross:center" v-on:click=SIDE_BAR_SHOW _v-eb44895a=""> <i class="iconfont icon-caidan" _v-eb44895a=""></i> </div> <div class=title _v-eb44895a="">{{title}}</div> <a class=icon flex="main:center cross:center" v-link="\'/signin\'" v-if=!user.accesstoken _v-eb44895a=""> <i class="iconfont icon-qudenglu" _v-eb44895a=""></i> </a> <a class=icon flex="main:center cross:center" v-link="\'/topic/create\'" v-else="" _v-eb44895a=""> <i class="iconfont icon-fabiao" _v-eb44895a=""></i> </a> </header> '},18:function(e,t,i){var o,r;i(21),o=i(9),r=i(15),e.exports=o||{},e.exports.__esModule&&(e.exports=e.exports["default"]),r&&(("function"==typeof e.exports?e.exports.options||(e.exports.options={}):e.exports).template=r)},19:function(e,t,i){var o,r;i(22),o=i(10),r=i(16),e.exports=o||{},e.exports.__esModule&&(e.exports=e.exports["default"]),r&&(("function"==typeof e.exports?e.exports.options||(e.exports.options={}):e.exports).template=r)},20:function(e,t,i){var o,r;i(23),o=i(11),r=i(17),e.exports=o||{},e.exports.__esModule&&(e.exports=e.exports["default"]),r&&(("function"==typeof e.exports?e.exports.options||(e.exports.options={}):e.exports).template=r)},21:function(e,t,i){var o=i(12);"string"==typeof o&&(o=[[e.id,o,""]]);i(2)(o,{});o.locals&&(e.exports=o.locals)},22:function(e,t,i){var o=i(13);"string"==typeof o&&(o=[[e.id,o,""]]);i(2)(o,{});o.locals&&(e.exports=o.locals)},23:function(e,t,i){var o=i(14);"string"==typeof o&&(o=[[e.id,o,""]]);i(2)(o,{});o.locals&&(e.exports=o.locals)},51:function(e,t,i){"use strict";function o(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(t,"__esModule",{value:!0});var r=i(25),s=o(r),n=i(4),a=o(n),c=i(8),d=o(c),l=i(5),p=o(l),v="topic";p["default"]._mutations[v+"SET_THING_STATE"]=function(e,t,i){var o=e[v].view.replies[t].ups,t=o.indexOf(i);t>-1?o.splice(t,1):o.push(i)},p["default"]._mutations[v+"RE_TA_EDIT"]=function(e,t){var i=e[v].view.replies[t];s["default"].set(i,"editState",!i.editState)},t["default"]={mixins:[(0,d["default"])(v)],route:{data:function(){this.getData()}},methods:{getData:function(){var e=this,t=arguments.length<=0||void 0===arguments[0]?function(){}:arguments[0],i=this.$route.params.id;a["default"].get("/api/v1/topic/"+i,{},function(t){var i=t.data;i?e.GET_DATA_VIEW(i):e.GET_DATA_ERROR({loadTip:"主题不存在"})},this.GET_DATA_ERROR,t)},testThing:function(e){return e.indexOf(this.user.id||"")>-1},toggleThing:function(e){if(!this.user.loginname)return this.$router.go("/signin");var t=this.view.replies.indexOf(e);this.$store.dispatch(v+"SET_THING_STATE",t,this.user.id),a["default"].post("/api/v1/reply/"+e.id+"/ups",{accesstoken:this.user.accesstoken})},reTa:function(e){return this.user.loginname?void this.$store.dispatch(v+"RE_TA_EDIT",e):this.$router.go("/signin")}},events:{reGo:function(e){this.getData(e)}}}},59:function(e,t,i){t=e.exports=i(1)(),t.push([e.id,".topic[_v-0e9cb70b]{background:#fff}.topic .tit[_v-0e9cb70b]{padding:20px 10px 10px;font-size:18px;color:#000}.topic .article[_v-0e9cb70b]{padding:10px}.user-view[_v-0e9cb70b]{position:relative;padding:10px;border-bottom:1px solid #eee}.user-view .tab[_v-0e9cb70b]{color:#2962ff}.user-view .typeicon[_v-0e9cb70b]{position:absolute;top:0;right:0;z-index:2;height:80px}.user-view .typeicon .icon[_v-0e9cb70b]{padding:20px 5px}.user-view .typeicon .iconfont[_v-0e9cb70b]{display:block;font-size:34px;-webkit-transform:rotate(35deg);transform:rotate(35deg)}.user-view .typeicon .icon-jinghua[_v-0e9cb70b]{color:#147b18}.user-view .typeicon .icon-zhiding[_v-0e9cb70b]{color:red}.user-view .user[_v-0e9cb70b]{padding:10px}.user-view .user .headimg[_v-0e9cb70b]{padding-right:10px}.user-view .user .headimg .pic[_v-0e9cb70b]{overflow:hidden;width:38px;height:38px;border-radius:50%;background:#d5d5d5}.user-view .user .name[_v-0e9cb70b]{font-size:16px;color:#000}.user-view .user .time[_v-0e9cb70b]{line-height:20px;font-size:12px;color:#888}.user-view .user .tab[_v-0e9cb70b]{padding-left:5px;line-height:20px;font-size:12px}.re-tit[_v-0e9cb70b]{padding:5px 10px;line-height:28px;border-top:1px solid #d5d5d5;border-bottom:2px solid #2962ff;background:#eee}.re-tit em[_v-0e9cb70b]{font-style:normal}.re-list li[_v-0e9cb70b]{padding:10px;border-bottom:1px solid #eee}.re-list .headimg[_v-0e9cb70b]{padding-right:10px}.re-list .headimg .pic[_v-0e9cb70b]{overflow:hidden;display:block;width:48px;height:48px;border-radius:50%;background:#eee}.re-list time[_v-0e9cb70b]{padding-left:10px;font-size:12px}.re-list .num[_v-0e9cb70b]{font-size:13px}.re-list .content[_v-0e9cb70b]{padding:10px 0;font-size:13px;font-family:inherit;color:inherit}.re-list .bottom .icon[_v-0e9cb70b]{position:relative;padding:5px 10px}.re-list .bottom .icon.count[_v-0e9cb70b]{color:#2962ff}.re-list .bottom .icon em[_v-0e9cb70b]{font-size:13px;font-style:normal}.re-topic[_v-0e9cb70b]{padding:20px 10px}",""])},78:function(e,t){e.exports=' <v-header :title=title _v-0e9cb70b=""></v-header> <template v-if="loadState > 0"> <div class=topic _v-0e9cb70b=""> <div class=user-view _v-0e9cb70b=""> <div class=typeicon flex="" v-if="view.top || view.good" _v-0e9cb70b=""> <div class=icon v-if=view.top _v-0e9cb70b=""> <i class="iconfont icon-zhiding" _v-0e9cb70b=""></i> </div> <div class=icon v-if=view.good _v-0e9cb70b=""> <i class="iconfont icon-jinghua" _v-0e9cb70b=""></i> </div> </div> <div class=user flex=box:first _v-0e9cb70b=""> <div class=headimg _v-0e9cb70b=""> <div class=pic _v-0e9cb70b=""> <img :src=view.author.avatar_url alt="" _v-0e9cb70b=""> </div> </div> <div class=box _v-0e9cb70b=""> <div class=name _v-0e9cb70b="">{{view.author.loginname}}</div> <div flex="" _v-0e9cb70b=""> <time class=time _v-0e9cb70b="">发表于{{view.create_at | formatDate}}</time> <div class=tab v-if=view.tab _v-0e9cb70b="">#{{view.tab | tabName}}#</div> </div> </div> </div> </div> <div class=tit _v-0e9cb70b="">{{view.title}}</div> <article class="markdown-body article" _v-0e9cb70b="">{{{view.content}}}</article> <div class=re-tit v-if=view.replies.length _v-0e9cb70b="">共<em _v-0e9cb70b="">{{view.replies.length}}条回复</em></div> <ul class=re-list _v-0e9cb70b=""> <li flex=box:first v-for="item in view.replies" _v-0e9cb70b=""> <div class=headimg _v-0e9cb70b=""> <a class=pic href=# _v-0e9cb70b=""> <img :src=item.author.avatar_url alt="" _v-0e9cb70b=""> </a> </div> <div class=bd _v-0e9cb70b=""> <div flex="" _v-0e9cb70b=""> <a flex-box=0 href=# _v-0e9cb70b="">{{item.author.loginname}}</a> <time flex-box=1 _v-0e9cb70b="">{{item.create_at | formatDate}}</time> <div flex-box=0 class=num _v-0e9cb70b="">#{{$index + 1}}</div> </div> <div class="content markdown-body" _v-0e9cb70b="">{{{item.content}}}</div> <div class=bottom flex="dir:right cross:center" _v-0e9cb70b=""> <div class=icon v-on:click=reTa($index) _v-0e9cb70b=""> <i class="iconfont icon-huifu" _v-0e9cb70b=""></i> </div> <div class=icon :class="{count: testThing(item.ups)}" v-on:click=toggleThing(item) _v-0e9cb70b=""> <i class="iconfont icon-dianzan" _v-0e9cb70b=""></i> <em v-if=item.ups.length _v-0e9cb70b="">{{item.ups.length}}</em> </div> </div> <topic-reply v-if=item.editState :topic_id=view.id :reply_id=item.id :accesstoken=user.accesstoken :placeholder="`@${item.author.loginname}`" _v-0e9cb70b=""></topic-reply> </div> </li> </ul> <div class=re-topic v-if=user.accesstoken _v-0e9cb70b=""> <topic-reply :accesstoken=user.accesstoken :topic_id=view.id _v-0e9cb70b=""></topic-reply> </div> </div> </template> <load v-else="" :tip=loadTip :state=loadState _v-0e9cb70b=""></load> '},92:function(e,t,i){var o,r;i(95),o=i(51),r=i(78),e.exports=o||{},e.exports.__esModule&&(e.exports=e.exports["default"]),r&&(("function"==typeof e.exports?e.exports.options||(e.exports.options={}):e.exports).template=r)},95:function(e,t,i){var o=i(59);"string"==typeof o&&(o=[[e.id,o,""]]);i(2)(o,{});o.locals&&(e.exports=o.locals)}});